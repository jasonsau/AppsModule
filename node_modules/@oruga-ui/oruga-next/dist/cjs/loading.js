'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var vue = require('vue');
var Loading = require('./Loading-d0d3335d.js');
var config = require('./config.js');
var helpers = require('./helpers.js');
var plugins = require('./plugins-7c8be2b1.js');
var InstanceRegistry = require('./InstanceRegistry-59ee6c97.js');
require('./Icon-ba0295bf.js');
require('./ssr-4e5033ea.js');

let localVueInstance;
let instances = new InstanceRegistry.InstanceRegistry();
const LoadingProgrammatic = {
    open(params) {
        const defaultParam = {
            programmatic: { instances }
        };
        const propsData = helpers.merge(defaultParam, params);
        propsData.promise = new Promise((p1, p2) => {
            propsData.programmatic.resolve = p1;
            propsData.programmatic.reject = p2;
        });
        const app = localVueInstance || config.VueInstance;
        const vnode = vue.createVNode(Loading.script, propsData);
        vnode.appContext = app._context;
        vue.render(vnode, document.createElement('div'));
        return vnode.component.proxy;
    },
    closeAll() {
        instances.walk((entry) => {
            entry.close(...arguments);
        });
    }
};
var index = {
    install(app) {
        localVueInstance = app;
        plugins.registerComponent(app, Loading.script);
        plugins.registerComponentProgrammatic(app, 'loading', LoadingProgrammatic);
    }
};

exports.OLoading = Loading.script;
exports.LoadingProgrammatic = LoadingProgrammatic;
exports["default"] = index;
